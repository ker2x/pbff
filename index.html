<!DOCTYPE html>
<html>
<head>
  <!-- Include meta tag to ensure proper rendering and touch zooming -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Include jQuery Mobile stylesheets -->
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  <!-- Include the jQuery library -->
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <!-- Include the jQuery Mobile library -->
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

<style>
.ui-content {
    padding: 0 !important;
}
 
.ui-listview {
    margin: 0 !important;
}
 
.my-wrapper, .my-wrapper div.iscroll-scroller {
    width: 100% !important;
}
</style>

<script type="text/javascript">

var json = {
	"checklist" : [
		{
			"title" : "Checklist 1",
			"text" : "this is checklist #1",
			"list" : [
					{ "title" : "First", "text" : "Complete first item"}, 
					{ "title" : "Second", "text" : "Complete 2nd item"}, 
					{ "title" : "Third", "text" : "Complete 3rd item"}, 
					{ "title" : "Fourth", "text" : "Complete 4th item"} 
				]
		},
		{
			"title" : "Checklist 2",
			"text" : "this is checklist #2",
			"list" : [
					{ "title" : "1st", "text" : "Complete first item"}, 
					{ "title" : "2nd", "text" : "Complete 2nd item"}, 
					{ "title" : "3rd", "text" : "Complete 3rd item"}, 
					{ "title" : "4th", "text" : "Complete 4th item"} 
				]
		}
	]
};

var clickedid = 0;
	
$(document).on("pageinit", '#home', function() {

	//$.getJSON('checklists.json', function(data) {
		var clid = 0;
		$.each(json.checklist, function(k, v) {
			$('#cl-list').append('<li><a href="" cl-id="' + clid + '"><h3>' + v.title + '</h3><p>' + v.text + '</p></a></li>');
			clid = clid + 1
		});
		$('#cl-list').listview('refresh');
	//});
}); 

$(document).on('vclick', '#cl-list li a', function(){  
    clickedid = $(this).attr('cl-id');
    $.mobile.changePage( "#clpage", { transition: "slide", changeHash: false });
});

$(document).on("pagebeforeshow", '#clpage', function() {
	$('#cl-data').empty();
	$.each(json.checklist[clickedid].list, function(k,v) {
		$('#cl-data').append('<li><h3>' + v.title + '</h3><p>' + v.text + '</p></li>');
	
	});
	$('#cl-data').listview('refresh');
});

</script>
 


</head>


<body>

<!-- MAIN PAGE -->
<div data-role="page" id="home">
    <div data-theme="a" data-role="header">
        <h3> Pilot Best Friend Forever </h3>
    </div>

    <div data-role="content">
        <div class="my-wrapper" data-iscroll>
            <ul data-role="listview"  id="cl-list" data-theme="a">
                
            </ul>
        </div>
    </div>

    <div data-theme="a" data-role="footer">
        <h1> <span class="ui-btn-icon-notext ui-icon-heart"></span> </h1>
    </div>  
</div>

<!-- CHECKLIST PAGE -->
<div data-role="page" id="clpage">
    <div data-theme="a" data-role="header">
        <a href="#home" class="ui-btn-left" data-transition="slide" data-direction="reverse">Back</a>
        <h3> Checklist </h3>
    <div data-role="content">
        <ul data-role="listview"  id="cl-data">
            
        </ul>
    </div>
</div>    

</body>
</html>

