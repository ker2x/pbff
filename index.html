<!DOCTYPE html>
<html>
<head>
  <!-- Include meta tag to ensure proper rendering and touch zooming -->
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=3">
  <!-- Include jQuery Mobile stylesheets -->
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  <!-- Include the jQuery library -->
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <!-- Include the jQuery Mobile library -->
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

<style>
/*
.ui-content {
    padding: 0 !important;
}
 
.ui-listview {
    margin: 0 !important;
}
 
.my-wrapper, .my-wrapper div.iscroll-scroller {
    width: 100% !important;
}
*/

/*
h1, body {
	font-size: 2em !important;
}
*/
h2 {
	/*font-size: 1.5em !important;*/
	text-align: right;
	padding-right: 10%;
}

/*
.ui-block-a {
	padding-left: 2%;
}

.ui-block-b {
	margin-top: 0.5em;
}
*/
.ui-btn.clchecked {
	background-color: #a6a6a6 !important;
}

.clseparator {
	background-color: #424242 !important;
} 

.cltitle {
	background-color: #999999 !important;
} 

</style>

<script type="text/javascript">

var json = {
	"checklist" : [
		{
			"title" : "A320neo",
			"text" : "X-Plane / JarDesign",
			"list" : [
					{ "title" : "COCKPIT PREPARATION", "text" : "", "style" : "cltitle"}, 
					{ "title" : "Stairway", "text" : "CALL/CONN"}, 
					{ "title" : "Engine Master 1", "text" : "OFF"}, 
					{ "title" : "Engine Master 2", "text" : "OFF"}, 
					{ "title" : "Ignition selector", "text" : "NORMAL"},
					{ "title" : "Landing gear", "text" : "DOWN"},
					{ "title" : "", "text" : "", "style" : "clseparator" },

					{ "title" : "Exterior power", "text" : "CALL TRUCK"},
					{ "title" : "Battery 1", "text" : "ON"},
					{ "title" : "Battery 2", "text" : "ON"},
					{ "title" : "Exterior power", "text" : "ON"},
					{ "title" : "Apu master", "text" : "ON"},
					{ "title" : "Apu start", "text" : "ON"},
					{ "title" : "Exterior power", "text" : "OFF"},
					{ "title" : "GPU truck", "text" : "Dismissed"},
					{ "title" : "", "text" : "", "style" : "clseparator" },

					{ "title" : "Cabin light", "text" : "SET"},
					{ "title" : "Parking brake", "text" : "SET"},
					{ "title" : "Probe window heat", "text" : "AUTO"},
					{ "title" : "Apu bleed", "text" : "ON"},
					{ "title" : "XBleed", "text" : "AUTO"},
					{ "title" : "Pack 1", "text" : "ON"},
					{ "title" : "Pack 2", "text" : "ON"},
					{ "title" : "Temp selector", "text" : "SET"},
					{ "title" : "", "text" : "", "style" : "clseparator" },

					{ "title" : "ADIRS data selector", "text" : "STS"},
					{ "title" : "ADIRS system selector", "text" : "1"},
					{ "title" : "ADIRS1 Selector", "text" : "NAV"},
					{ "title" : "Wait for BAT light OFF", "text" : ""},
					{ "title" : "ADIRS2 Selector", "text" : "NAV"},
					{ "title" : "Wait for BAT light OFF", "text" : ""},
					{ "title" : "ADIRS3 Selector", "text" : "NAV"},
					{ "title" : "Wait for BAT light OFF", "text" : ""},
					{ "title" : "ADIRS Position", "text" : "Enter"},
					{ "title" : "", "text" : "", "style" : "clseparator" },

					{ "title" : "Emergency light", "text" : "ARM"},
					{ "title" : "Strobe light", "text" : "AUTO"},
					{ "title" : "Radio Panel", "text" : "ON"},
					{ "title" : "Radio frequency", "text" : "SET"},
					{ "title" : "ATC Delivery Clearance", "text" : "OBTAINED"},
					{ "title" : "QNH", "text" : "SET"},
					{ "title" : "FMGS", "text" : "SET"},
					{ "title" : "FCU", "text" : "SET"},
					{ "title" : "Flight Director", "text" : "ON"},
					{ "title" : "Transponder/TCAS", "text" : "STANDBY"},
					{ "title" : "Thrust lever", "text" : "IDLE"},
					{ "title" : "ADIRS", "text" : "ALIGNED"},
					{ "title" : "", "text" : "", "style" : "clseparator" },

					{ "title" : "BEFORE START CHECKLIST", "text" : "", "style":"cltitle"},
					{ "title" : "Doors", "text" : "CLOSED"},
					{ "title" : "Stairway", "text" : "DISMISSED"},
					{ "title" : "Seatbelt sign", "text" : "ON"},
					{ "title" : "No Smoking sign", "text" : "ON"},
					{ "title" : "Beacon light", "text" : "ON"},
					{ "title" : "Radio Frequency", "text" : "SET TWR"},
					{ "title" : "ATC clearance for Push & Start", "text" : "OBTAINED"},
					{ "title" : "Antiskid", "text" : "Disconnect"},
					{ "title" : "Tow truck", "text" : "Call"},
					{ "title" : "Pushback", "text" : "Complete"},
					{ "title" : "Tow truck", "text" : "Dismissed"},
					{ "title" : "Antiskid", "text" : "ON"},
					{ "title" : "Parking brake", "text" : "ON"},
					{ "title" : "Before start checklist", "text" : "COMPLETED"},
					{ "title" : "", "text" : "", "style" : "clseparator" },

					{ "title" : "ENGINE START", "text" : "", "style":"cltitle"},
					{ "title" : "Fuel pumps", "text" : "ON"},
					{ "title" : "Ignition Selector", "text" : "Start"},
					{ "title" : "Engine 2 Master", "text" : "ON"},
					{ "title" : "Engine 1 Master", "text" : "ON"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "AFTER ENGINE START", "text" : "", "style" : "cltitle"},
					{ "title" : "Ignition selector", "text" : "Normal"},
					{ "title" : "APU bleed", "text" : "OFF"},
					{ "title" : "Pack 1", "text" : "ON"},
					{ "title" : "Pack 2", "text" : "ON"},
					{ "title" : "Ground spoiler", "text" : "Armed"},
					{ "title" : "Autobrake", "text" : "MAX"},
					{ "title" : "Flaps", "text" : "UP"},
					{ "title" : "Apu Master", "text" : "OFF"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "TAXI CHECKLIST", "text" : "", "style":"cltitle"},
					{ "title" : "Anti-ice", "text" : "AS REQ"},
					{ "title" : "Clearance", "text" : "OBTAINED"},
					{ "title" : "Nose Light", "text" : "TAXI"},
					{ "title" : "Parking Break", "text" : "Released"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "AT HOLDING POINT", "text" : "", "style" : "cltitle"},
					{ "title" : "Weather Radar", "text" : "ON"},
					{ "title" : "ATC Clearance", "text" : "OBTAINED"},
					{ "title" : "Transponder/TCAS", "text" : "MODE C"},
					{ "title" : "FLAPS", "text" : "SET"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "LINED UP", "text" : "", "style" : "cltitle"},
					{ "title" : "Pack 1", "text" : "OFF"},
					{ "title" : "Pack 2", "text" : "OFF"},
					{ "title" : "Landing Light", "text" : "ON"},
					{ "title" : "Nose light", "text" : "OFF"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "TAKEOFF", "text" : "", "style" : "cltitle"},
					{ "title" : "Break", "text" : "Released"},
					{ "title" : "Thrust levers", "text" : "TOGA/FLEX"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "AFTER TAKEOFF", "text" : "", "style" : "cltitle"},
					{ "title" : "Gears", "text" : "UP"},
					{ "title" : "Pack 1", "text" : "ON"},
					{ "title" : "Pack 2", "text" : "ON"},
					{ "title" : "Flaps", "text" : "UP"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "CLIMB", "text" : "", "style" : "cltitle"},
					{ "title" : "Anti-ice", "text" : "AS REQ"},
					{ "title" : "Altimeter QNH", "text" : "STD"},
					{ "title" : "Passing 10k feets", "text" : ""},
					{ "title" : "Landging lights", "text" : "OFF"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "CRUISE", "text" : "", "style" : "cltitle"},
					{ "title" : "Seatbelt sign", "text" : "AS REQ"},
					{ "title" : "Time to relax", "text" : ":)"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "DESCENT", "text" : "", "style":"cltitle"},
					{ "title" : "FMGS APP PHASE", "text" : "SET"},
					{ "title" : "FMGS TOGA PHASE", "text" : "Checked"},
					{ "title" : "Seatbelt sign", "text" : "ON"},
					{ "title" : "", "text" : ""},
					{ "title" : "Passing 10k feets", "text" : ""},
					{ "title" : "Landing Light", "text" : "ON"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "APPROACH", "text" : "", "style" : "cltitle"},
					{ "title" : "FMGS APP PHASE", "text" : "Activated"},
					{ "title" : "ILS button", "text" : "ON"},
					{ "title" : "Altimeter QNH", "text" : "Set"},
					{ "title" : "", "text" : ""},
					{ "title" : "ILS ESTABLISHED", "text" : ""},
					{ "title" : "AP2", "text" : "ON"},
					{ "title" : "Altimeter QNH", "text" : "Set"},
					{ "title" : "Flaps", "text" : "AS REQ"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "LANDING", "text" : "", "style" : "cltitle"},
					{ "title" : "Landing Gear", "text" : "DOWN"},
					{ "title" : "Flaps", "text" : "FULL"},
					{ "title" : "Autobrake", "text" : "SET"},
					{ "title" : "Ground Spoiler", "text" : "ARM"},
					{ "title" : "", "text" : "", "style" : "clseparator"},

					{ "title" : "AFTER LANDING", "text" : "", "style" : "cltitle"},
					{ "title" : "...", "text" : ""},
					{ "title" : "", "text" : ""},
					{ "title" : "", "text" : ""},
					{ "title" : "", "text" : ""},
					{ "title" : "", "text" : ""},
				]
		},
		{
			"title" : "Checklist 2",
			"text" : "this is checklist #2",
			"list" : [
					{ "title" : "1st", "text" : "Complete first item"}, 
					{ "title" : "2nd", "text" : "Complete 2nd item"}, 
					{ "title" : "3rd", "text" : "Complete 3rd item"}, 
					{ "title" : "4th", "text" : "Complete 4th item"} 
				]
		}
	]
};

var clickedid = 0;
	
// JS for main page
$(document).on("pageinit", '#home', function() {

	//$.getJSON('checklists.json', function(data) {
		var clid = 0;
		$.each(json.checklist, function(k, v) {
			$('#cl-list').append('<li><a href="" cl-id="' + clid + '"><h1>' + v.title + '</h1><p>' + v.text + '</p></a></li>');
			clid = clid + 1
		});
		$('#cl-list').listview('refresh');
	//});
}); 

// On checklist click
$(document).on('vclick', '#cl-list li a', function(){  
    clickedid = $(this).attr('cl-id');
    $.mobile.changePage( "#clpage", { transition: "slide", changeHash: false });
});


// JS for 2nd page
$(document).on("pagebeforeshow", '#clpage', function() {
	$('#cl-data').empty();
	$.each(json.checklist[clickedid].list, function(k,v) {
		console.log(v.title);
		if(typeof v.style === "undefined") {
			line  = '<li data-icon="false"><a href="#">' +
				'<div class="ui-grid-a">' +
				'	<div class="ui-block-a"><h1>' + v.title + '</h1></div>' +
				'	<div class="ui-block-b"><h2>' + v.text + '</h2></div>' +
				'</div> </a></li>';
		} else if(v.style == "cltitle") {
			line  = '<li data-role="list-divider"><h1>' + v.title + '</h1><p>' + v.text + '</p></li>';
		} else {
			line  = '<li data-icon="false"><a href="#" class="' + v.style + '"><h1>' + v.title + '</h1><p>' + v.text + '</p></a></li>';
		} 
		$('#cl-data').append(line);
	});
	$('#cl-data').listview('refresh');
});

// On Item click
$(document).on('vclick', '#cl-data li a', function(){  
	$(this).toggleClass("clchecked");
});


</script>
</head>


<body>

<!-- MAIN PAGE -->
<div data-role="page" id="home">
    <div data-theme="a" data-role="header">
        <h3> Pilot's Best Friend Forever </h3>
    </div>

    <div data-role="content">
        <div class="my-wrapper" data-iscroll>
            <ul data-role="listview"  id="cl-list" data-theme="a">
            </ul>
        </div>
    </div>

    <div data-theme="a" data-role="footer">
        <h1> <span class="ui-btn-icon-notext ui-icon-heart"></span> </h1>
    </div>  
</div>

<!-- CHECKLIST PAGE -->
<div data-role="page" id="clpage">
    <div data-theme="a" data-role="header">
        <a href="#home" class="ui-btn-left" data-transition="slide" data-direction="reverse">Back</a>
        <h3> Checklist </h3>
    <div data-role="content">
        <ul data-role="listview"  id="cl-data">
        </ul>
    </div>
</div>    

</body>
</html>

